freq = F)
# lines(density(pred[levels_id_vector == i]),
#       col = "red")
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
# lines(density(pred[levels_id_vector == i]),
#       col = "red")
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
plot(pred_list[[i]],
type = 'l',
add = T)
}
dev.off()
warnings()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
lines(pred_list[[i]])
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
lines(density(pred_list[[i]]))
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "gray",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
plot(density(pred_list[[i]]))
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "gray",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
plot((pred_list[[i]]),
type = 'l')
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
hist((pred_list[[i]]),
col = "salmon"
add =  T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
hist((pred_list[[i]]),
col = "salmon",
add =  T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(1,10),
freq = F)
hist((pred_list[[i]]),
freq = F,
col = "salmon",
add =  T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "lightblue",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
hist((pred_list[[i]]),
freq = F,
breaks = 20,
col = "salmon",
add =  T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "lightblue",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
hist(pred_list[[i]],
freq = F,
breaks = 20,
col = "salmon",
add =  T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "lightblue",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
hist(pred_list[[i]],
freq = F,
breaks = 20,
col = "salmon")
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
# hist(statistic[levels_id_vector == i],
#      col = "lightblue",
#      breaks = 20,
#      main = paste0(country_id[i]),
#      xlab = paste0("leon FL ", country_id[i]),
#      ylab = NA,
#      ylim = c(0,0.8),
#      xlim = c(1,10),
#      freq = F)
hist(pred_list[[i]],
freq = T,
breaks = 20,
col = "salmon")
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
hist(pred_list[[i]],
freq = F,
breaks = 20,
col = "salmon",
add = T)
}
dev.off()
summary(pred_list[[1]])
summary(statistic[levels_id_vector == 1])
library(wiodbayes)
pred_list <- list()
for(i in 1:43){
# pred_list[[i]] <- dgamma(dat_list[[i]],
#                          shape = param_vals_1[i],
#                          rate = param_vals_2[i])
pred_list[[i]] <- rgamma(10^3,
shape = param_vals_1[i],
rate = param_vals_2[2])
}
######making the JH plot
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
hist(pred_list[[i]],
freq = F,
breaks = 20,
col = "salmon",
add = T)
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
# hist(pred_list[[i]],
#      freq = F,
#      breaks = 20,
#      col = "salmon",
#      add = T)
lines(pred_list[[i]],
col = "salmon")
}
dev.off()
?legend
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "lightblue",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
# hist(pred_list[[i]],
#      freq = F,
#      breaks = 20,
#      col = "salmon",
#      add = T)
lines(density(pred_list[[i]]))
}
dev.off()
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
# hist(pred_list[[i]],
#      freq = F,
#      breaks = 20,
#      col = "salmon",
#      add = T)
lines(density(pred_list[[i]]),
col = "red")
}
dev.off()
for(i in 1:43){
# pred_list[[i]] <- dgamma(dat_list[[i]],
#                          shape = param_vals_1[i],
#                          rate = param_vals_2[i])
pred_list[[i]] <- rgamma(10^3,
shape = param_vals_1[i],
rate = param_vals_2[i])
}
pdf("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/leontief_FL_pred_JH.pdf",
height = 15, width = 11)
par(mfrow = c(9,5),
mar = c(2,2,2,2))
for(i in 1:43){
hist(statistic[levels_id_vector == i],
col = "gray",
breaks = 20,
main = paste0(country_id[i]),
xlab = paste0("leon FL ", country_id[i]),
ylab = NA,
ylim = c(0,0.8),
xlim = c(0,10),
freq = F)
# hist(pred_list[[i]],
#      freq = F,
#      breaks = 20,
#      col = "salmon",
#      add = T)
lines(density(pred_list[[i]]),
col = "red")
}
dev.off()
?loo::compare
library(wiodbayes)
?fit_wiod
########----
# Load the data here and start
#####
rm(list = ls())
load("/Users/Advait/Desktop/New_School/JH_networks/extra_storage_wiod_bayes/wiod_final_data/wiod_final_data.Rda")
#
#==================================================#
# L_FL
#==================================================#
##making the statistic and the indicator vector for all models
statistic <- c(unlist(wiod_final_data[[1]]))
levels_id_vector <- c(wiod_final_data[[5]])
country_id <- wiod_final_data[[6]][1:43]
#------------------#
# normal
#------------------#
l_fl_normal <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "normal",
pooling = "partial")
l_fl_normal
l_fl_lognormal <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "lognormal",
pooling = "partial")
l_fl_skew_normal <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "skew_normal",
pooling = "partial")
#------------------#
# gamma
#------------------#
l_fl_gamma <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "gamma",
pooling = "partial")
l_fl_exponential <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "exponential",
pooling = "partial")
library(wiodbayes)
l_fl_exponential <- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "exponential",
pooling = "partial")
#------------------#
l_fl_weibull<- fit_wiod(statistic = statistic,
levels_id_vector = levels_id_vector,
model = "weibull",
pooling = "partial")
loo_l_fl_normal <- loo_wiod(l_fl_normal)
loo_l_fl_normal
l_fl_normal
loo_l_fl_lognormal <- loo_wiod(l_fl_lognormal)
loo_l_fl_lognormal
loo_l_fl_normal
loo_l_fl_gamma <- loo_wiod(l_fl_gamma)
loo_l_fl_gamma
library(wiodbayes)
parallel::detectCores()
library(wiodbayes)
loo_l_fl_normal <- loo_wiod(l_fl_normal)
loo_l_fl_normal
loo_l_fl_lognormal <- loo_wiod(l_fl_lognormal)
loo_l_fl_lognormal
loo_l_fl_gamma <- loo_wiod(l_fl_gamma)
loo_l_fl_gamma
loo_l_fl_exponential <- loo_wiod(l_fl_exponential)
loo_l_fl_exponential
loo_l_fl_weibull <- loo_wiod(l_fl_weibull)
loo_l_fl_weibull
?compare
l_fl_compare <- loo::compare(x = list(loo_l_fl_normal,
loo_l_fl_lognormal,
loo_l_fl_gamma,
loo_l_fl_exponential,
loo_l_fl_weibull))
l_fl_compare
compare(loo_l_fl_normal,loo_l_fl_exponential)
compare(loo_l_fl_lognormal,loo_l_fl_exponential)
compare(loo_l_fl_gamma,loo_l_fl_exponential)
compare(loo_l_fl_weibull,loo_l_fl_exponential)
compare(loo_l_fl_exponential,loo_l_fl_gamma)
compare(loo_l_fl_lognormal,loo_l_fl_gamma)
l_fl_compare <- loo::compare(loo_l_fl_normal,
loo_l_fl_lognormal,
loo_l_fl_gamma,
loo_l_fl_exponential,
loo_l_fl_weibull)
l_fl_compare
compare(loo_l_fl_normal,loo_l_fl_lognormal)
compare(loo_l_fl_normal,loo_l_fl_gamma)
compare(loo_l_fl_lognormal,loo_l_fl_gamma)
compare(loo_l_fl_lognormal,loo_l_fl_exponential)
compare(loo_l_fl_lognormal,loo_l_fl_weibull)
compare(loo_l_fl_lognormal,loo_l_fl_normal)
l_fl_compare <- loo::compare(loo_l_fl_normal,
loo_l_fl_lognormal,
loo_l_fl_gamma,
loo_l_fl_exponential,
loo_l_fl_weibull)
l_fl_compare
